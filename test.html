<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Prayer Time Azan Test</title>
</head>

<body>

	<!-- Audio element for Azan -->
	<audio id="azan-audio" src="azan3.mp3" preload="auto"></audio>

	<h3>Enter test time (24-hour format HH:MM):</h3>
	<input type="text" id="test-time" placeholder="e.g. 14:30">
	<button id="set-time">Set Test Time</button>

	<p id="status">No test time set.</p>

	<script>
		let isMuted = false;
		let testTime = null; // format: "HH:MM"
		const audio = document.getElementById('azan-audio');
		audio.muted = isMuted;

		// Unlock audio on first user click
		document.addEventListener('click', async () => {
			try {
				await audio.play();
				audio.pause();
				audio.currentTime = 0;
			} catch (e) {
				console.warn('Audio unlock failed', e);
			}
		});

		// Set the test time
		document.getElementById('set-time').addEventListener('click', () => {
			const input = document.getElementById('test-time').value.trim();
			if (/^\d{2}:\d{2}$/.test(input)) {
				testTime = input;
				document.getElementById('status').textContent = `Test time set to ${testTime}`;
			} else {
				alert('Invalid time format. Please enter HH:MM in 24-hour format.');
			}
		});

		// Check every second if current time matches test time
		setInterval(() => {
			if (testTime) {
				const now = new Date();
				const current = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
				if (current === testTime && now.getSeconds() === 0) {
					audio.play();
					document.getElementById('status').textContent = `Azan playing at ${current}`;
				}
			}
		}, 1000);

	</script>

</body>

</html>
